import ViewCanvas

stream Mouse(X, Y, TYPE, BUTTON, META, SHIFT, DELTA_X, DELTA_Y, CLICK_COUNT) : Mouse

canvas main[COLOR: "BLACK"]

view
from Mouse
    filter(BUTTON=1) 
    filter(TYPE=~"DRAG")
    filter(SHIFT!~"TRUE")
    X : ScreenToCanvasDimension(DELTA_X,0) -> Sub(view.X, ScreenToCanvasDimension.W)
    Y : ScreenToCanvasDimension(0,DELTA_Y) -> Sub(view.Y, ScreenToCanvasDimension.H)
from Mouse
    filter(BUTTON=1)
    filter(SHIFT=~"true")
    filter(TYPE=~"DRAG") 
    ZOOM : Mult(DELTA_Y, .01) -> Add(Mult, view.ZOOM)
from Mouse
    filter(BUTTON=1)
    filter(CLICK_COUNT=3)
    (W, H, X,Y) : (canvas.W, canvas.H, canvas.X, canvas.Y)



layer Heat
from Mouse
    ID : Count()
    (X,Y) : (X,Y)
    FILL_COLOR: Colorize(META)
    SIZE: 10
    PEN_COLOR : Color{CLEAR}


operator Colorize(Meta) -> C
    (Meta !~ "true") => C: Color{WHITE}
    (Meta =~ "true") => C: Color{GREEN}
