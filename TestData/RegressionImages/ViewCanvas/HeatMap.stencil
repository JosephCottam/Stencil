STREAM: Mouse
NAME: Mouse
FREQUENCY: 30

external stream Mouse(X, Y, BUTTON, SCREEN_X, SCREEN_Y, DELTA_X, DELTA_Y, CLICK_COUNT, CTRL, ALT, SHIFT, META, TYPE, Source)

layer Heat
from Mouse
	ID : Count(" ") -> VALUE
	(X,Y) : (X,Y)
	FILL_COLOR: Colorize(META) -> C
	SIZE: 10
	STROKE_COLOR : @color(CLEAR)
	canvas(BACKGROUND_COLOR): @color(BLACK)

layer Nav
from Mouse
	filter(BUTTON=1) 
	filter(TYPE=~"DRAG")
	filter(SHIFT!~"TRUE")
	view(X) : ScreenToCanvasDimension(DELTA_X,0) -> Sub(view[X], Width) -> VALUE
	view(Y) : ScreenToCanvasDimension(0,DELTA_Y) -> Sub(view[Y], Height) -> VALUE
from Mouse
	filter(BUTTON=1)
	filter(SHIFT=~"true")
	filter(TYPE=~"DRAG") 
	view(ZOOM) : Mult(DELTA_Y, .01) -> Add(VALUE, view[ZOOM]) -> VALUE
from Mouse
	filter(BUTTON=1)
	filter(CLICK_COUNT=3)
	view(WIDTH, HEIGHT, X,Y) : (canvas[WIDTH], canvas[HEIGHT], canvas[X], canvas[Y])

operator Colorize(Meta) -> C
	(Meta !~ "true") => C: @color(WHITE)
	(Meta =~ "true") => C: @color(GREEN)
