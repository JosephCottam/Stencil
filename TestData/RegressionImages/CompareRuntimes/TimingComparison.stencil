STREAM: File
NAME: times
TUPLE_SIZE: 6
SEPARATOR: \s*,\s*
SOURCE: ./1iters_1Mc.csv
SKIP: 1
STRICT: true

import BrewerPalettes

stream times(elapse, size, refs, perm, type, i)


layer Runtimes["POLY_POINT"]
guide
  axis Log from Y
  axis Linear from X
  legend from PEN_COLOR
from times
  local(name):  Concatenate(type , " (", perm, ")")
  ID: Concatenate(local.name, size)
  GROUP: local.name
  ORDER: ToNumber(size)
  IMPLANT: "LINE"
  X:* Mult(size,2) -> Scale[0,100](_)
  Y:* Split[2](@FullMax, local.name, size, elapse) -#> Log[2](_) -> Scale[min:0, max:100](_)
  PEN_COLOR:* BrewerColors[palette:"set3"](local.name)


operator FullMax: Range[ALL](@Max)
operator Avg: Range[ALL](@Mean)
