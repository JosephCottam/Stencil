STREAM: Twitter
NAME: Tweets
KEYWORDS: 
STREAM: Mouse
NAME: Mouse
FREQUENCY: -2147483648

import Layouts
import Geometry : Geo

stream Tweets(message, user, tags, geo, place, date)
stream Mouse(X, Y, BUTTON, SCREEN_X, SCREEN_Y, DELTA_X, DELTA_Y, CLICK_COUNT, CTRL, ALT, SHIFT, META, TYPE)

view
from #Render
  (X,Y,WIDTH, HEIGHT) : (canvas.X, canvas.Y, canvas.WIDTH, canvas.HEIGHT)


layer Map
from Tweets
   filter (geo != NULL)
   ID: Count()
   (X,Y): (geo.1, geo.0) 
   REGISTRATION: "CENTER"
   SIZE: 10
   IMPLANT: "POINT"
   SHAPE: "RECTANGLE"
   FILL_COLOR: Color{Purple, 20}
 
layer Locations["TEXT"]
from Tweets
   ID: Count()
   TEXT: message
   VISIBLE: "FALSE"
   VISIBLE:* Nearest() -> EQ(_, self.ID)
from Mouse
   (): Locations.nearest(X,Y) -> Nearest.set(Locations.ID)

operator Nearest : Remember
