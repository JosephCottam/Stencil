STREAM: File
NAME: Tweets
HEADER: MESSAGE
SEPARATOR: ,
SOURCE: ./Tweets.txt
SKIP: 1
STRICT: TRUE

import ViewCanvas

stream Tweets(MESSAGE)	

layer Counts
guide axis[tickSize: 5, textOffset: 6] Categorical from X
   label.FONT: @Font{10}
   line.PEN: @Stroke{1} 
   label.REGISTRATION: "LEFT"

from Tweets
	ID: firstLetter(MESSAGE) -> Letter
	X:* firstLetter(MESSAGE) -#> Rank(Letter) -> Mult(11, rank)
	Y: firstLetter(MESSAGE) -> Count(Letter) -> Mult(-11, count)
	REGISTRATION: "BOTTOM"
	SIZE: 10
	
layer Tracking
from Tweets
	view(ZOOM) : Zoom(view[PORTAL_WIDTH], view[PORTAL_HEIGHT], canvas[WIDTH], canvas[HEIGHT]) -> _
	view(X,Y): (canvas[X], canvas[Y])
	

operator firstLetter(Phrase) -> (Letter)
	(ALL) => Letter: Trim(Phrase) -> Substring(value, 0,1)
